package day18_Bank;

import java.io.FileWriter;
import java.io.IOException;

public class Customer {
	
	private String bankName; //은행명
	private String customerName; // 예금주명
	private String accountNum; // 계좌번호
	private int balance; // 잔액
	
	public Customer(String bankName, String customerName, String accountNum, int balance) {
		this.bankName = bankName;
		this.customerName = customerName;
		this.accountNum = accountNum;
		this.balance = balance;
	}
	
	// 파일이름 리턴 메서드
	private String getFileName() {
		return customerName +"_"+bankName+".txt";
	}
	
	// 파일에 기록하는 메서드
	private void fileSave(String action, int amount) {
		try {
			FileWriter fw = new FileWriter(getFileName(),true);
			String data = action + " : " + amount + "원, 현재 잔액: "+this.balance+"원\r\n";
			fw.write(data);
		} catch (IOException e) {
			e.printStackTrace();
		}
	}
	
	// 입금 메서드
	public void deposit(int amount) {
		this.balance += amount;
		System.out.println(amount+"원 입금완료.");
		System.out.println("현재 잔액: "+this.balance+"원");
		
		// 파일로 출력
		fileSave("입금", amount);
	}
	
	
	// 출금
	public void withdraw(int amount) {
		if(this.balance < amount) {
			System.out.println("잔액 부족입니다. 출금 실패.");
			return;
		}
		this.balance -= amount;
		System.out.println(amount+"원 출금완료.");
		System.out.println("현재 잔액: "+this.balance+"원");
		
		// 파일로 출력
		fileSave("출금", amount);
	}
	
	
	// 송금
	public void transfer(Customer to, int amount) {
		if(this.balance < amount) {
			System.out.println("잔액 부족입니다. 송금 실패.");
			return;
		}
		this.balance -= amount;
		to.setBalance(to.getBalance()+amount); // 상대방
		System.out.println(to.getCustomerName()+"님께"+amount+"원 송금완료.");
		System.out.println("현재 잔액: "+this.balance+"원");
		
		// 파일로 출력
		fileSave("송금 -> "+to.getCustomerName(), amount);
		to.fileSave("송금 <- "+this.customerName, amount); // 상대방
		
	}
	
	// 통장내역 출력
	public void print() {
		
	}
	
	
	public String getBankName() {
		return bankName;
	}

	public String getCustomerName() {
		return customerName;
	}

	public String getAccountNum() {
		return accountNum;
	}

	public int getBalance() {
		return balance;
	}

	public void setBankName(String bankName) {
		this.bankName = bankName;
	}

	public void setCustomerName(String customerName) {
		this.customerName = customerName;
	}

	public void setAccountNum(String accountNum) {
		this.accountNum = accountNum;
	}

	public void setBalance(int balance) {
		this.balance = balance;
	}
	
	
	@Override
	public String toString() {
		return "Customer [bankName=" + bankName + ", customerName=" + customerName + ", accountNum=" + accountNum
				+ ", balance=" + balance + "]";
	}
	
}
